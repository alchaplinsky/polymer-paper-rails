<!doctype html>
<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
<head>
  <title>core-collapse</title>

  <script src="../../../platform/platform.js"></script>
  <script src="../../../polymer-test-tools/chai/chai.js"></script>
  <script src="../../../polymer-test-tools/htmltest.js"></script>


  <link rel="import" href="../../core-collapse.html">

</head>
<body unresolved>

  <button onclick="document.querySelector('#collapse').toggle()">toggle collapse</button>

  <core-collapse id="collapse" duration="0.1" opened>
    <div>
    Forma temperiemque cornua sidera dissociata cornua recessit innabilis ligavit: solidumque coeptis nullus caelum sponte phoebe di regat mentisque tanta austro capacius amphitrite sui quin postquam semina fossae liquidum umor galeae coeptis caligine liberioris quin liquidum matutinis invasit posset: flexi glomeravit radiis certis invasit oppida postquam onerosior inclusum dominari opifex terris pace finxit quam aquae nunc sine altae auroram quam habentem homo totidemque scythiam in pondus ensis tegit caecoque poena lapidosos humanas coeperunt poena aetas totidem nec natura aethera locavit caelumque distinxit animalibus phoebe cingebant moderantum porrexerat terrae possedit sua sole diu summaque obliquis melioris orbem
    </div>
  </core-collapse>

  <script>

    var delay = 200;
    document.addEventListener('polymer-ready', function() {
      var assert = chai.assert;
      var c = document.querySelector('#collapse');
      // verify take attribute for opened is correct
      assert.equal(c.opened, true);
      setTimeout(function() {
        // get the height for the opened state
        var h = getCollapseComputedStyle().height;
        // verify the height is not 0px
        assert.notEqual(getCollapseComputedStyle().height, '0px');
        // close it
        c.opened = false;
        Platform.flush();
        setTimeout(function() {
          // verify is closed
          assert.notEqual(getCollapseComputedStyle().height, h);
          // open it
          c.opened = true;
          Platform.flush();
          setTimeout(function() {
            // verify is opened
            assert.equal(getCollapseComputedStyle().height, h);
            done();
          }, delay);
        }, delay);
      }, delay);
    });

    function getCollapseComputedStyle() {
      var b = document.querySelector('#collapse');
      return getComputedStyle(b);
    }

  </script>

</body>
</html>
